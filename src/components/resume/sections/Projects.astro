---
import Hideable from "../Hideable.svelte";
import type { ResumeStrings } from "../resume-strings.interface";
import type { ResumeData, SafeLanguage } from "../resume.interface";
import SectionTitle from "../shared/SectionTitle.astro";

interface Props {
  str: ResumeStrings;
  projects: ResumeData["projects"];
  safeLanguage: SafeLanguage;
}

const { str, projects, safeLanguage } = Astro.props;
---

<section class="print:mb-2">
  <Hideable client:load>
    <SectionTitle title={str.projects} />
    <ul class="ml-4 list-disc">
      {
        projects.map((proj) => (
          <Hideable client:load hide={proj.hidden}>
            <li class="mb-2 flex flex-wrap items-baseline gap-x-1 print:mb-1">
              {() => {
                if (typeof proj.title === "string") {
                  return <span class="font-semibold print:text-sm">{proj.title} </span>;
                } else if (typeof proj.title === "object") {
                  return <span class="font-semibold print:text-sm">{proj.title[safeLanguage]} </span>;
                } else {
                  return null;
                }
              }}

              <span class="print:text-xs">- {proj.description[safeLanguage]}</span>
              <a class="font-bold print:text-xs" href={proj.url} target="_blank" rel="noopener noreferrer">
                {proj.url.replace(/^(https?:\/\/)?(www\.)?/, "").replace(/\/$/, "")}
              </a>
            </li>
          </Hideable>
        ))
      }
    </ul>
  </Hideable>
</section>
